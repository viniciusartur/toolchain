language: node_js

build:
  cache: true
  cache_dir_list:
    - ~/.m2
  ci:
    - docker build -t kodekonveyor/toolchain:$BRANCH.$BUILD_NUMBER .
    - docker build -t kodekonveyor/toolchain:$BRANCH .

  post_ci:
    - docker push kodekonveyor/toolchain:$BRANCH.$BUILD_NUMBER
    - docker push kodekonveyor/toolchain:$BRANCH

integrations:
  hub:
    - integrationName: docker
      type: dockerRegistryLogin
